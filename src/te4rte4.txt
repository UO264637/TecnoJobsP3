create table offer_skill (
  inserted_at timestamp with time zone default timezone('utc'::text, now()) not null,
  updated_at timestamp with time zone default timezone('utc'::text, now()) not null,
  offer_id int8 not null references offer on delete cascade not null,
  skill_id int8 not null references skill on delete cascade not null,

  primary key (offer_id, skill_id)
);

create table offer_skill (
  id bigint generated by default as identity primary key,
  inserted_at timestamp with time zone default timezone('utc'::text, now()) not null,
  updated_at timestamp with time zone default timezone('utc'::text, now()) not null,
  offer_id uuid references offer on delete cascade not null,
  skill_id uuid references skill on delete cascade not null
);

create view skills_by_offer as
    select
        skill.name,
        skill.color,
        offer_skill.offer_id
    from skill, offer_skill
    WHERE skill.id = offer_skill.skill_id
